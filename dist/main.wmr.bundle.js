(()=>{var e={217:function(e,t,i){var r;!function(s){"use strict";function o(e){if(!(e=e||("undefined"!=typeof localStorage?localStorage:null)))throw new Error("ExpiredStorage: No storage base class provided and 'localStorage' is undefined! Please provide a valid base storage class.");if(!(e.setItem&&e.getItem&&e.removeItem&&e.clear))throw new Error("ExpiredStorage: Storage class  don't support one or more of the required API functions: getItem, setItem, removeItem or clear.");this._storage=e}o.prototype={_storage:null,_expiration_key_prefix:"__expired_storage_ts__",getTimestamp:function(){return Math.floor((new Date).getTime()/1e3)},setItem:function(e,t,i){var r=this._storage.setItem(e,t);return i&&this.updateExpiration(e,i),r},getItem:function(e){return this.isExpired(e)?(this.removeItem(e),null):this._storage.getItem(e)},peek:function(e){var t={value:this._storage.getItem(e),timeLeft:this.getTimeLeft(e)};return t.isExpired=null!==t.timeLeft&&t.timeLeft<=0,t},getTimeLeft:function(e){var t=parseInt(this._storage.getItem(this._expiration_key_prefix+e));return t&&!isNaN(t)?t-this.getTimestamp():null},isExpired:function(e){var t=this.getTimeLeft(e);return null!==t&&t<=0},updateExpiration:function(e,t){return this._storage.setItem(this._expiration_key_prefix+e,this.getTimestamp()+t)},removeItem:function(e){var t=this._storage.removeItem(e);return this._storage.removeItem(this._expiration_key_prefix+e),t},setJson:function(e,t,i){if(void 0===t)throw new Error("Cannot set undefined value as JSON!");return this.setItem(e,JSON.stringify(t),i)},getJson:function(e){var t=this.getItem(e);return null===t?null:JSON.parse(t)},keys:function(e){var t=[],i=this;return this._iterKeys((function(r){0!==r.indexOf(i._expiration_key_prefix)&&(!e&&i.isExpired(r)||t.push(r))})),t},_iterKeys:function(e){if("function"==typeof this._storage.keys)for(var t=this._storage.keys(),i=0;i<t.length;++i)e(t[i]);else if("function"==typeof Object&&Object.keys)for(t=Object.keys(this._storage),i=0;i<t.length;++i)e(t[i]);else if(void 0!==this._storage.length&&"function"==typeof this._storage.key){t=[],i=0;for(var r=this._storage.length;i<r;++i)t.push(this._storage.key(i));for(i=0;i<t.length;++i)e(t[i])}else for(var s in this._storage)e(s)},clear:function(){this._storage.clear()},clearExpired:function(){var e=[],t=(this.getTimestamp(),this);return this._iterKeys((function(i){if(0===i.indexOf(t._expiration_key_prefix)){var r=i.substr(t._expiration_key_prefix.length);t.isExpired(r)&&(t.removeItem(r),e.push(r))}})),e}},o.version="1.0.2",o.author="Ronen Ness",o.gitUrl="https://github.com/RonenNess/ExpiredStorage",void 0===(r=function(){return o}.call(t,i,t,e))||(e.exports=r)}()}},t={};function i(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,i),o.exports}(()=>{"use strict";const e=i(217);((t,i)=>{const r=new e;t.wmr_redirect_url=null,t.wmr_site_id=r.getItem("wmr_site_id");const s=()=>{i("input[name=wmr_site_id]").on("change",(function(e){let r=this.value,s=i(`input[name=wmr_site_id][value=${r}]`),n=s.data("site-url"),a=s.data("popup-title"),_=s.data("popup-desc"),u=s.data("popup-button-text");t.wmr_redirect_url=n,t.wmr_site_id=r,t.wmr_redirect_url?i(".wmr-go-button").addClass("__active"):i(".wmr-go-button").removeClass("__active"),o(a,_,u)}))},o=(e,t,r)=>{i(".wmr-popup-select-site-redirect__title").html(e),i(".wmr-go-button").html(r),t?(i(".wmr-popup-select-site-redirect__desc-entry").html(t),i(".wmr-popup-select-site-redirect__desc").stop(!0,!0).slideDown("slow")):i(".wmr-popup-select-site-redirect__desc").stop(!0,!0).slideUp(0)},n=e=>{1==e?i("body").addClass("__wmr-show"):i("body").removeClass("__wmr-show")},a=()=>{let e=null;i("input[name=wmr_site_id]").each((function(){let t=i(this);if(t.data("site-cc").split(",").includes(WMR_PHP_DATA?.my_location?.countryCode))return e=t,!1})),e?(e.prop("checked",!0),e.parents(".__site-option").addClass("__active")):(i('input[name=wmr_site_id][data-site-cc="*"]').prop("checked",!0),i('input[name=wmr_site_id][data-site-cc="*"]').parents(".__site-option").addClass("__active"))};i((()=>{t.wmr_site_id&&WMR_PHP_DATA.blog_id==t.wmr_site_id||n(!0),i(".wmr-popup-select-site-redirect .__close").on("click",(e=>{e.preventDefault(),n(!1)})),s(),i(".wmr-go-button").on("click",(function(e){e.preventDefault(),r.setItem("wmr_site_id",t.wmr_site_id,86400),window.location.href=t.wmr_redirect_url})),a(),t.addEventListener("hashchange",(()=>{(e=>{let i=((e,t)=>{var i=e.match(new RegExp("wmr_id=([^&]*)"));return i?i[1]:null})(e),s=WMR_PHP_DATA.site_options.find((e=>e.site==i));r.setItem("wmr_site_id",s.site,86400),t.location.href=s.site_url})(t.location.hash)})),i("input[name=wmr_site_id]:checked").trigger("change")}))})(window,jQuery)})()})();