(()=>{var e={217:function(e,t,r){var i;!function(s){"use strict";function o(e){if(!(e=e||("undefined"!=typeof localStorage?localStorage:null)))throw new Error("ExpiredStorage: No storage base class provided and 'localStorage' is undefined! Please provide a valid base storage class.");if(!(e.setItem&&e.getItem&&e.removeItem&&e.clear))throw new Error("ExpiredStorage: Storage class  don't support one or more of the required API functions: getItem, setItem, removeItem or clear.");this._storage=e}o.prototype={_storage:null,_expiration_key_prefix:"__expired_storage_ts__",getTimestamp:function(){return Math.floor((new Date).getTime()/1e3)},setItem:function(e,t,r){var i=this._storage.setItem(e,t);return r&&this.updateExpiration(e,r),i},getItem:function(e){return this.isExpired(e)?(this.removeItem(e),null):this._storage.getItem(e)},peek:function(e){var t={value:this._storage.getItem(e),timeLeft:this.getTimeLeft(e)};return t.isExpired=null!==t.timeLeft&&t.timeLeft<=0,t},getTimeLeft:function(e){var t=parseInt(this._storage.getItem(this._expiration_key_prefix+e));return t&&!isNaN(t)?t-this.getTimestamp():null},isExpired:function(e){var t=this.getTimeLeft(e);return null!==t&&t<=0},updateExpiration:function(e,t){return this._storage.setItem(this._expiration_key_prefix+e,this.getTimestamp()+t)},removeItem:function(e){var t=this._storage.removeItem(e);return this._storage.removeItem(this._expiration_key_prefix+e),t},setJson:function(e,t,r){if(void 0===t)throw new Error("Cannot set undefined value as JSON!");return this.setItem(e,JSON.stringify(t),r)},getJson:function(e){var t=this.getItem(e);return null===t?null:JSON.parse(t)},keys:function(e){var t=[],r=this;return this._iterKeys((function(i){0!==i.indexOf(r._expiration_key_prefix)&&(!e&&r.isExpired(i)||t.push(i))})),t},_iterKeys:function(e){if("function"==typeof this._storage.keys)for(var t=this._storage.keys(),r=0;r<t.length;++r)e(t[r]);else if("function"==typeof Object&&Object.keys)for(t=Object.keys(this._storage),r=0;r<t.length;++r)e(t[r]);else if(void 0!==this._storage.length&&"function"==typeof this._storage.key){t=[],r=0;for(var i=this._storage.length;r<i;++r)t.push(this._storage.key(r));for(r=0;r<t.length;++r)e(t[r])}else for(var s in this._storage)e(s)},clear:function(){this._storage.clear()},clearExpired:function(){var e=[],t=(this.getTimestamp(),this);return this._iterKeys((function(r){if(0===r.indexOf(t._expiration_key_prefix)){var i=r.substr(t._expiration_key_prefix.length);t.isExpired(i)&&(t.removeItem(i),e.push(i))}})),e}},o.version="1.0.2",o.author="Ronen Ness",o.gitUrl="https://github.com/RonenNess/ExpiredStorage",void 0===(i=function(){return o}.call(t,r,t,e))||(e.exports=i)}()}},t={};function r(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,r),o.exports}(()=>{"use strict";const e=r(217);((t,r)=>{const i=new e;t.wmr_redirect_url=null,t.wmr_site_id=i.getItem("wmr_site_id");const s=()=>{r("input[name=wmr_site_id]").on("change",(function(e){let i=this.value,s=r(`input[name=wmr_site_id][value=${i}]`),n=s.data("site-url"),a=s.data("popup-title"),_=s.data("popup-desc"),u=s.data("popup-button-text");t.wmr_redirect_url=n,t.wmr_site_id=i,t.wmr_redirect_url?r(".wmr-go-button").addClass("__active"):r(".wmr-go-button").removeClass("__active"),o(a,_,u)}))},o=(e,t,i)=>{r(".wmr-popup-select-site-redirect__title").html(e),r(".wmr-go-button").html(i),t?(r(".wmr-popup-select-site-redirect__desc-entry").html(t),r(".wmr-popup-select-site-redirect__desc").stop(!0,!0).slideDown("slow")):r(".wmr-popup-select-site-redirect__desc").stop(!0,!0).slideUp(0)},n=e=>{1==e?r("body").addClass("__wmr-show"):r("body").removeClass("__wmr-show")},a=()=>{let e=null;r("input[name=wmr_site_id]").each((function(){let t=r(this);if(t.data("site-cc").split(",").includes(WMR_PHP_DATA?.my_location?.countryCode))return e=t,!1})),e?(e.prop("checked",!0),e.parents(".__site-option").addClass("__active")):(r('input[name=wmr_site_id][data-site-cc="*"]').prop("checked",!0),r('input[name=wmr_site_id][data-site-cc="*"]').parents(".__site-option").addClass("__active"))};r((()=>{t.wmr_site_id&&WMR_PHP_DATA.blog_id==t.wmr_site_id||n(!0),r(".wmr-popup-select-site-redirect .__close").on("click",(e=>{e.preventDefault(),n(!1)})),s(),r(".wmr-go-button").on("click",(function(e){e.preventDefault(),i.setItem("wmr_site_id",t.wmr_site_id,86400),window.location.href=t.wmr_redirect_url})),a(),r("input[name=wmr_site_id]:checked").trigger("change")}))})(window,jQuery)})()})();